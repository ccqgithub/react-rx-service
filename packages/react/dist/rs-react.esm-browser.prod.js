import{BehaviorSubject as t,Subject as e}from"rxjs";import r,{createContext as n,useContext as o,forwardRef as i,useCallback as s,useRef as u,useEffect as c,useState as a,useMemo as f}from"react";var p,l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};!function(t){!function(e){var r="object"==typeof l?l:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),n=o(t);function o(t,e){return function(r,n){"function"!=typeof t[r]&&Object.defineProperty(t,r,{configurable:!0,writable:!0,value:n}),e&&e(r,n)}}void 0===r.Reflect?r.Reflect=t:n=o(r.Reflect,n),function(t){var e=Object.prototype.hasOwnProperty,r="function"==typeof Symbol,n=r&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=r&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",i="function"==typeof Object.create,s={__proto__:[]}instanceof Array,u=!i&&!s,c={create:i?function(){return ot(Object.create(null))}:s?function(){return ot({__proto__:null})}:function(){return ot({})},has:u?function(t,r){return e.call(t,r)}:function(t,e){return e in t},get:u?function(t,r){return e.call(t,r)?t[r]:void 0}:function(t,e){return t[e]}},a=Object.getPrototypeOf(Function),f="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,p=f||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?et():Map,l=f||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?rt():Set,h=new(f||"function"!=typeof WeakMap?nt():WeakMap);function y(t,e,r,n){if(I(r)){if(!Y(t))throw new TypeError;if(!B(e))throw new TypeError;return O(t,e)}if(!Y(t))throw new TypeError;if(!U(e))throw new TypeError;if(!U(n)&&!I(n)&&!R(n))throw new TypeError;return R(n)&&(n=void 0),x(t,e,r=V(r),n)}function d(t,e){function r(r,n){if(!U(r))throw new TypeError;if(!I(n)&&!q(n))throw new TypeError;C(t,e,r,n)}return r}function b(t,e,r,n){if(!U(r))throw new TypeError;return I(n)||(n=V(n)),C(t,e,r,n)}function v(t,e,r){if(!U(e))throw new TypeError;return I(r)||(r=V(r)),j(t,e,r)}function _(t,e,r){if(!U(e))throw new TypeError;return I(r)||(r=V(r)),k(t,e,r)}function w(t,e,r){if(!U(e))throw new TypeError;return I(r)||(r=V(r)),P(t,e,r)}function m(t,e,r){if(!U(e))throw new TypeError;return I(r)||(r=V(r)),M(t,e,r)}function g(t,e){if(!U(t))throw new TypeError;return I(e)||(e=V(e)),A(t,e)}function E(t,e){if(!U(t))throw new TypeError;return I(e)||(e=V(e)),D(t,e)}function S(t,e,r){if(!U(e))throw new TypeError;I(r)||(r=V(r));var n=T(e,r,!1);if(I(n))return!1;if(!n.delete(t))return!1;if(n.size>0)return!0;var o=h.get(e);return o.delete(r),o.size>0||h.delete(e),!0}function O(t,e){for(var r=t.length-1;r>=0;--r){var n=(0,t[r])(e);if(!I(n)&&!R(n)){if(!B(n))throw new TypeError;e=n}}return e}function x(t,e,r,n){for(var o=t.length-1;o>=0;--o){var i=(0,t[o])(e,r,n);if(!I(i)&&!R(i)){if(!U(i))throw new TypeError;n=i}}return n}function T(t,e,r){var n=h.get(t);if(I(n)){if(!r)return;n=new p,h.set(t,n)}var o=n.get(e);if(I(o)){if(!r)return;o=new p,n.set(e,o)}return o}function j(t,e,r){if(k(t,e,r))return!0;var n=tt(e);return!R(n)&&j(t,n,r)}function k(t,e,r){var n=T(e,r,!1);return!I(n)&&L(n.has(t))}function P(t,e,r){if(k(t,e,r))return M(t,e,r);var n=tt(e);return R(n)?void 0:P(t,n,r)}function M(t,e,r){var n=T(e,r,!1);if(!I(n))return n.get(t)}function C(t,e,r,n){T(r,n,!0).set(t,e)}function A(t,e){var r=D(t,e),n=tt(t);if(null===n)return r;var o=A(n,e);if(o.length<=0)return r;if(r.length<=0)return o;for(var i=new l,s=[],u=0,c=r;u<c.length;u++){i.has(p=c[u])||(i.add(p),s.push(p))}for(var a=0,f=o;a<f.length;a++){var p;i.has(p=f[a])||(i.add(p),s.push(p))}return s}function D(t,e){var r=[],n=T(t,e,!1);if(I(n))return r;for(var o=J(n.keys()),i=0;;){var s=X(o);if(!s)return r.length=i,r;var u=Q(s);try{r[i]=u}catch($){try{Z(o)}finally{throw $}}i++}}function F(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function I(t){return void 0===t}function R(t){return null===t}function N(t){return"symbol"==typeof t}function U(t){return"object"==typeof t?null!==t:"function"==typeof t}function z(t,e){switch(F(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var r=3===e?"string":5===e?"number":"default",o=G(t,n);if(void 0!==o){var i=o.call(t,r);if(U(i))throw new TypeError;return i}return H(t,"default"===r?"number":r)}function H(t,e){if("string"===e){var r=t.toString;if(W(r))if(!U(o=r.call(t)))return o;if(W(n=t.valueOf))if(!U(o=n.call(t)))return o}else{var n;if(W(n=t.valueOf))if(!U(o=n.call(t)))return o;var o,i=t.toString;if(W(i))if(!U(o=i.call(t)))return o}throw new TypeError}function L(t){return!!t}function K(t){return""+t}function V(t){var e=z(t,3);return N(e)?e:K(e)}function Y(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function W(t){return"function"==typeof t}function B(t){return"function"==typeof t}function q(t){switch(F(t)){case 3:case 4:return!0;default:return!1}}function G(t,e){var r=t[e];if(null!=r){if(!W(r))throw new TypeError;return r}}function J(t){var e=G(t,o);if(!W(e))throw new TypeError;var r=e.call(t);if(!U(r))throw new TypeError;return r}function Q(t){return t.value}function X(t){var e=t.next();return!e.done&&e}function Z(t){var e=t.return;e&&e.call(t)}function tt(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===a)return e;if(e!==a)return e;var r=t.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return e;var o=n.constructor;return"function"!=typeof o||o===t?e:o}function et(){var t={},e=[],r=function(){function t(t,e,r){this._index=0,this._keys=t,this._values=e,this._selector=r}return t.prototype["@@iterator"]=function(){return this},t.prototype[o]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var r=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var r=this._find(t,!0);return this._values[r]=e,this},e.prototype.delete=function(e){var r=this._find(e,!1);if(r>=0){for(var n=this._keys.length,o=r+1;o<n;o++)this._keys[o-1]=this._keys[o],this._values[o-1]=this._values[o];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new r(this._keys,this._values,n)},e.prototype.values=function(){return new r(this._keys,this._values,i)},e.prototype.entries=function(){return new r(this._keys,this._values,s)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[o]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function n(t,e){return t}function i(t,e){return e}function s(t,e){return[t,e]}}function rt(){return function(){function t(){this._map=new p}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[o]=function(){return this.keys()},t}()}function nt(){var t=16,r=c.create(),n=o();return function(){function t(){this._key=o()}return t.prototype.has=function(t){var e=i(t,!1);return void 0!==e&&c.has(e,this._key)},t.prototype.get=function(t){var e=i(t,!1);return void 0!==e?c.get(e,this._key):void 0},t.prototype.set=function(t,e){return i(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=i(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=o()},t}();function o(){var t;do{t="@@WeakMap@@"+a()}while(c.has(r,t));return r[t]=!0,t}function i(t,r){if(!e.call(t,n)){if(!r)return;Object.defineProperty(t,n,{value:c.create()})}return t[n]}function s(t,e){for(var r=0;r<e;++r)t[r]=255*Math.random()|0;return t}function u(t){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):s(new Uint8Array(t),t):s(new Array(t),t)}function a(){var e=u(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var r="",n=0;n<t;++n){var o=e[n];4!==n&&6!==n&&8!==n||(r+="-"),o<16&&(r+="0"),r+=o.toString(16).toLowerCase()}return r}}function ot(t){return t.__=void 0,delete t.__,t}t("decorate",y),t("metadata",d),t("defineMetadata",b),t("hasMetadata",v),t("hasOwnMetadata",_),t("getMetadata",w),t("getOwnMetadata",m),t("getMetadataKeys",g),t("getOwnMetadataKeys",E),t("deleteMetadata",S)}(n)}()}(p||(p={}));const h={logLevel:"error",log:(t,e="info")=>{console&&console[e]&&console[e](t)}},y=t=>{Object.keys(t).forEach((e=>{e in h&&void 0!==t[e]&&(h[e]=t[e])}))},d=(t,e="info",r=!0)=>{if(!r)return;const n=["info","warn","error","never"];n.indexOf(h.logLevel)>n.indexOf(e)||h.log(t,e)},b=Symbol("empty");class v{constructor(){this.$_disposers=[]}beforeDispose(t){this.$_disposers.push(t)}dispose(){this.$_disposers.forEach((t=>{t()}))}}class _{constructor(t,e){this._desc=t,this.factory=e?.factory}toString(){return`InjectionToken: ${this._desc}`}}const w=Symbol("inject:constructor:params"),m=(t,e={})=>(r,n,o)=>{if(void 0!==n)throw new Error("The @inject decorator can only be used on consturctor parameters!");const i=Reflect.getOwnMetadata(w,r)||[];i[o]={provide:t,optional:!!e.optional},Reflect.defineMetadata(w,i,r)};class g{constructor(t=[],e=null){this.parent=null,this.records=new Map,this.parent=e,t.forEach((t=>{let e=null;if("object"==typeof t){const r=t,n=["useValue","useClass","useExisiting","useFactory"];let o=0;n.forEach((t=>{void 0!==r[t]&&o++})),o>1&&d(`These keys [${n.join(",")}] can only use one, other will be ignored!`,"warn");const{useValue:i=null,...s}=r;e={...s,value:i}}else if("function"==typeof t&&"function"==typeof t.prototype.constructor){e={provide:t,useClass:t}}if(!e)throw d(t),new Error("Error provider onfig!");if(!(void 0!==e.value||e.useClass||e.useExisiting||e.useFactory||e.provide instanceof _&&e.useFactory))throw d(t),new Error("Error provider onfig!");this.records.set(e.provide,e)}))}isProvided(t){return!!this.records.has(t)||!!this.parent&&this.parent.isProvided(t)}get(t){const e=this.records.get(t);return e?(void 0===e.value&&this.$_initRecord(e),e.value||null):this.parent?this.parent.get(t):null}$_initRecord(t){if(t.provide instanceof _&&t.provide.factory){t.value=t.provide.factory(((e,r={})=>{const{optional:n}=r,o=this.get(e);if(!o&&!n)throw d(t),d(_),new Error("Can not find all deps in the DI tree when init the InjectionToken, please provide them before you use the InjectionToken's factory!");return o}))}if(t.useClass){const e=(Reflect.getOwnMetadata(w,t.useClass)||[]).map((e=>{if("object"!=typeof e)return;const{provide:r,optional:n}=e,o=this.get(r);if(!o&&!n)throw d(t),new Error("Can not find all deps in the DI tree when init the useClass, please provide them before you use the useClass!");return o}));t.value=new t.useClass(...e)}else if(t.useExisiting)t.value=this.get(t.useExisiting);else if(t.useFactory){t.value=t.useFactory(((e,r={})=>{const{optional:n}=r,o=this.get(e);if(!o&&!n)throw d(t),new Error("Can not find all deps in the DI tree when init the useFactory, please provide them before you use the useFactory!");return o}))}}dispose(){for(const[,t]of this.records){if(!t.value)return;t.dispose?t.dispose(t.value):"function"==typeof t.value.dispose&&t.value.dispose()}this.parent=null,this.records.clear()}}class E extends v{constructor(r={}){super(),this.displayName="",this.$$={},this.$={},this.displayName||(this.displayName=this.constructor.name,d(`[Service ${this.displayName}]: For better debugging, you'd better add an attribute 'displayName' to each service class.`,"warn"));const n=r.state||{};Object.keys(n).forEach((e=>{this.$$[e]=new t(n[e])}));(r.actions||[]).forEach((t=>{this.$[t]=new e})),Object.keys(this.$$).forEach((t=>{this.subscribe(this.$$[t],{next:e=>{d(`[Service ${this.displayName}]: set new state [${t}].`,"info"),d(e,"info")}})})),Object.keys(this.$).forEach((t=>{this.subscribe(this.$[t],{next:e=>{d(`[Service ${this.displayName}]: receive new action [${t}].`,"info"),d(e,"info")}})}))}get state(){const e={};return Object.keys(this.$$).forEach((r=>{const n=this.$$[r];n instanceof t&&(e[r]=n.value)})),e}subscribe(t,...e){const r=t.subscribe(...e);this.beforeDispose((()=>{r.unsubscribe()}))}}
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S="function"==typeof Symbol&&Symbol.for,O=S?Symbol.for("react.element"):60103,x=S?Symbol.for("react.portal"):60106,$=S?Symbol.for("react.fragment"):60107,T=S?Symbol.for("react.strict_mode"):60108,j=S?Symbol.for("react.profiler"):60114,k=S?Symbol.for("react.provider"):60109,P=S?Symbol.for("react.context"):60110,M=S?Symbol.for("react.async_mode"):60111,C=S?Symbol.for("react.concurrent_mode"):60111,A=S?Symbol.for("react.forward_ref"):60112,D=S?Symbol.for("react.suspense"):60113,F=S?Symbol.for("react.suspense_list"):60120,I=S?Symbol.for("react.memo"):60115,R=S?Symbol.for("react.lazy"):60116,N=S?Symbol.for("react.block"):60121,U=S?Symbol.for("react.fundamental"):60117,z=S?Symbol.for("react.responder"):60118,H=S?Symbol.for("react.scope"):60119;function L(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case O:switch(t=t.type){case M:case C:case $:case j:case T:case D:return t;default:switch(t=t&&t.$$typeof){case P:case A:case R:case I:case k:return t;default:return e}}case x:return e}}}function K(t){return L(t)===C}var V,Y={AsyncMode:M,ConcurrentMode:C,ContextConsumer:P,ContextProvider:k,Element:O,ForwardRef:A,Fragment:$,Lazy:R,Memo:I,Portal:x,Profiler:j,StrictMode:T,Suspense:D,isAsyncMode:function(t){return K(t)||L(t)===M},isConcurrentMode:K,isContextConsumer:function(t){return L(t)===P},isContextProvider:function(t){return L(t)===k},isElement:function(t){return"object"==typeof t&&null!==t&&t.$$typeof===O},isForwardRef:function(t){return L(t)===A},isFragment:function(t){return L(t)===$},isLazy:function(t){return L(t)===R},isMemo:function(t){return L(t)===I},isPortal:function(t){return L(t)===x},isProfiler:function(t){return L(t)===j},isStrictMode:function(t){return L(t)===T},isSuspense:function(t){return L(t)===D},isValidElementType:function(t){return"string"==typeof t||"function"==typeof t||t===$||t===C||t===j||t===T||t===D||t===F||"object"==typeof t&&null!==t&&(t.$$typeof===R||t.$$typeof===I||t.$$typeof===k||t.$$typeof===P||t.$$typeof===A||t.$$typeof===U||t.$$typeof===z||t.$$typeof===H||t.$$typeof===N)},typeOf:L},W=(function(t){t.exports=Y}(V={exports:{}},V.exports),V.exports),B={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},q={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},G={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},J={};function Q(t){return W.isMemo(t)?G:J[t.$$typeof]||B}J[W.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},J[W.Memo]=G;var X=Object.defineProperty,Z=Object.getOwnPropertyNames,tt=Object.getOwnPropertySymbols,et=Object.getOwnPropertyDescriptor,rt=Object.getPrototypeOf,nt=Object.prototype;var ot=function t(e,r,n){if("string"!=typeof r){if(nt){var o=rt(r);o&&o!==nt&&t(e,o,n)}var i=Z(r);tt&&(i=i.concat(tt(r)));for(var s=Q(e),u=Q(r),c=0;c<i.length;++c){var a=i[c];if(!(q[a]||n&&n[a]||u&&u[a]||s&&s[a])){var f=et(r,a);try{X(e,a,f)}catch($){}}}}return e};const it=n(new g),st=t=>{const e=o(it),{providers:n=[],children:i}=t,s=new g(n,e);return r.createElement(it.Provider,{value:s},i)},ut=t=>{const e=o(it);return"function"==typeof t.children?t.children({getService:(t,r={})=>{const{optional:n=!1}=r;if(!e.get(t)&&!n)throw d(t,"error"),new Error("Can not find the service, you provide it?")}}):t.children},ct=t=>e=>{const n="withInjector("+(e.displayName||e.name)+")",o=i(((n,o)=>r.createElement(st,{providers:t.providers},r.createElement(e,Object.assign({ref:o},n)))));return o.displayName=n,ot(o,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var at=function(t,e){return(at=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function ft(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}at(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function pt(t){return"function"==typeof t}var lt=!1,ht={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t);lt=t},get useDeprecatedSynchronousErrorHandling(){return lt}};function yt(t){setTimeout((function(){throw t}),0)}var dt={closed:!0,next:function(t){},error:function(t){if(ht.useDeprecatedSynchronousErrorHandling)throw t;yt(t)},complete:function(){}},bt=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function vt(t){return null!==t&&"object"==typeof t}var _t=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),wt=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var r=this,n=r._parentOrParents,o=r._ctorUnsubscribe,i=r._unsubscribe,s=r._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var u=0;u<n.length;++u){n[u].remove(this)}if(pt(i)){o&&(this._unsubscribe=void 0);try{i.call(this)}catch($){e=$ instanceof _t?mt($.errors):[$]}}if(bt(s)){u=-1;for(var c=s.length;++u<c;){var a=s[u];if(vt(a))try{a.unsubscribe()}catch($){e=e||[],$ instanceof _t?e=e.concat(mt($.errors)):e.push($)}}}if(e)throw new _t(e)}},t.prototype.add=function(e){var r=e;if(!e)return t.EMPTY;switch(typeof e){case"function":r=new t(e);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof t)){var n=r;(r=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var o=r._parentOrParents;if(null===o)r._parentOrParents=this;else if(o instanceof t){if(o===this)return r;r._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return r;o.push(this)}var i=this._subscriptions;return null===i?this._subscriptions=[r]:i.push(r),r},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function mt(t){return t.reduce((function(t,e){return t.concat(e instanceof _t?e.errors:e)}),[])}var gt=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Et=function(t){function e(r,n,o){var i=t.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=dt;break;case 1:if(!r){i.destination=dt;break}if("object"==typeof r){r instanceof e?(i.syncErrorThrowable=r.syncErrorThrowable,i.destination=r,r.add(i)):(i.syncErrorThrowable=!0,i.destination=new St(i,r));break}default:i.syncErrorThrowable=!0,i.destination=new St(i,r,n,o)}return i}return ft(e,t),e.prototype[gt]=function(){return this},e.create=function(t,r,n){var o=new e(t,r,n);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(wt),St=function(t){function e(e,r,n,o){var i,s=t.call(this)||this;s._parentSubscriber=e;var u=s;return pt(r)?i=r:r&&(i=r.next,n=r.error,o=r.complete,r!==dt&&(pt((u=Object.create(r)).unsubscribe)&&s.add(u.unsubscribe.bind(u)),u.unsubscribe=s.unsubscribe.bind(s))),s._context=u,s._next=i,s._error=n,s._complete=o,s}return ft(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;ht.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,r=ht.useDeprecatedSynchronousErrorHandling;if(this._error)r&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)r?(e.syncErrorValue=t,e.syncErrorThrown=!0):yt(t),this.unsubscribe();else{if(this.unsubscribe(),r)throw t;yt(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};ht.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(r){if(this.unsubscribe(),ht.useDeprecatedSynchronousErrorHandling)throw r;yt(r)}},e.prototype.__tryOrSetError=function(t,e,r){if(!ht.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,r)}catch(n){return ht.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=n,t.syncErrorThrown=!0,!0):(yt(n),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(Et);var Ot=function(){function t(t){this.total=t}return t.prototype.call=function(t,e){return e.subscribe(new xt(t,this.total))},t}(),xt=function(t){function e(e,r){var n=t.call(this,e)||this;return n.total=r,n.count=0,n}return ft(e,t),e.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},e}(Et);function $t(){const t=o(it);return s((e=>t.get(e)),[t])}const Tt=t=>$t()(t);function jt(t){const e=$t();return t.map((t=>e(t)))}function kt(t,e){const r=u(e);r.current=e,c((()=>{const e=t.subscribe({next:t=>r.current(t)});return()=>{e.unsubscribe()}}),[t])}function Pt(e,r){var n;e instanceof t?e=e.pipe((n=1,function(t){return t.lift(new Ot(n))})):(d(e,"warn"),d("Yout are use useBehaviorChange on a observable that is not BehaviorSubject!","warn"));const o=u(r);o.current=r,c((()=>{const t=e.subscribe({next:t=>o.current(t)});return()=>{t.unsubscribe()}}),[e])}function Mt(e,r){const[n,o]=a((()=>e instanceof t?e.value:r));return c((()=>{const t=e.subscribe({next:t=>o(t)});return()=>{t.unsubscribe()}}),[e]),n}function Ct(t){const[e,r]=a((()=>t.value));return c((()=>{const e=t.subscribe({next:t=>r(t)});return()=>{e.unsubscribe()}}),[t]),e}function At(t,r=!1){const[n,o]=a(null),i=f((()=>t instanceof e&&r&&t.hasError),[t,r]);return c((()=>{if(i)return;const e=t.subscribe({error:t=>{o(t)}});return()=>{e.unsubscribe()}}),[t,i]),n}export{v as Disposable,m as Inject,_ as InjectionToken,g as Injector,E as Service,ut as ServiceConsumer,st as ServiceInjector,y as config,d as debug,b as empty,Pt as useBehaviorChange,Ct as useBehaviorState,$t as useGetService,kt as useObservableChange,At as useObservableError,Mt as useObservableState,Tt as useService,jt as useServices,ct as withInjector};
