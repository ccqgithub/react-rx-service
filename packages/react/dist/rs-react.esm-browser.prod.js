import{BehaviorSubject as t,Subject as e}from"rxjs";import r,{createContext as n,useContext as o,forwardRef as i,useCallback as s,useEffect as u,useState as c,useMemo as a}from"react";var f,p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};!function(t){!function(e){var r="object"==typeof p?p:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),n=o(t);function o(t,e){return function(r,n){"function"!=typeof t[r]&&Object.defineProperty(t,r,{configurable:!0,writable:!0,value:n}),e&&e(r,n)}}void 0===r.Reflect?r.Reflect=t:n=o(r.Reflect,n),function(t){var e=Object.prototype.hasOwnProperty,r="function"==typeof Symbol,n=r&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=r&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",i="function"==typeof Object.create,s={__proto__:[]}instanceof Array,u=!i&&!s,c={create:i?function(){return ot(Object.create(null))}:s?function(){return ot({__proto__:null})}:function(){return ot({})},has:u?function(t,r){return e.call(t,r)}:function(t,e){return e in t},get:u?function(t,r){return e.call(t,r)?t[r]:void 0}:function(t,e){return t[e]}},a=Object.getPrototypeOf(Function),f="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,p=f||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?et():Map,l=f||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?rt():Set,h=new(f||"function"!=typeof WeakMap?nt():WeakMap);function y(t,e,r,n){if(I(r)){if(!Y(t))throw new TypeError;if(!B(e))throw new TypeError;return O(t,e)}if(!Y(t))throw new TypeError;if(!U(e))throw new TypeError;if(!U(n)&&!I(n)&&!R(n))throw new TypeError;return R(n)&&(n=void 0),$(t,e,r=V(r),n)}function d(t,e){function r(r,n){if(!U(r))throw new TypeError;if(!I(n)&&!q(n))throw new TypeError;C(t,e,r,n)}return r}function b(t,e,r,n){if(!U(r))throw new TypeError;return I(n)||(n=V(n)),C(t,e,r,n)}function v(t,e,r){if(!U(e))throw new TypeError;return I(r)||(r=V(r)),j(t,e,r)}function _(t,e,r){if(!U(e))throw new TypeError;return I(r)||(r=V(r)),k(t,e,r)}function w(t,e,r){if(!U(e))throw new TypeError;return I(r)||(r=V(r)),P(t,e,r)}function m(t,e,r){if(!U(e))throw new TypeError;return I(r)||(r=V(r)),M(t,e,r)}function g(t,e){if(!U(t))throw new TypeError;return I(e)||(e=V(e)),A(t,e)}function E(t,e){if(!U(t))throw new TypeError;return I(e)||(e=V(e)),D(t,e)}function S(t,e,r){if(!U(e))throw new TypeError;I(r)||(r=V(r));var n=T(e,r,!1);if(I(n))return!1;if(!n.delete(t))return!1;if(n.size>0)return!0;var o=h.get(e);return o.delete(r),o.size>0||h.delete(e),!0}function O(t,e){for(var r=t.length-1;r>=0;--r){var n=(0,t[r])(e);if(!I(n)&&!R(n)){if(!B(n))throw new TypeError;e=n}}return e}function $(t,e,r,n){for(var o=t.length-1;o>=0;--o){var i=(0,t[o])(e,r,n);if(!I(i)&&!R(i)){if(!U(i))throw new TypeError;n=i}}return n}function T(t,e,r){var n=h.get(t);if(I(n)){if(!r)return;n=new p,h.set(t,n)}var o=n.get(e);if(I(o)){if(!r)return;o=new p,n.set(e,o)}return o}function j(t,e,r){if(k(t,e,r))return!0;var n=tt(e);return!R(n)&&j(t,n,r)}function k(t,e,r){var n=T(e,r,!1);return!I(n)&&L(n.has(t))}function P(t,e,r){if(k(t,e,r))return M(t,e,r);var n=tt(e);return R(n)?void 0:P(t,n,r)}function M(t,e,r){var n=T(e,r,!1);if(!I(n))return n.get(t)}function C(t,e,r,n){T(r,n,!0).set(t,e)}function A(t,e){var r=D(t,e),n=tt(t);if(null===n)return r;var o=A(n,e);if(o.length<=0)return r;if(r.length<=0)return o;for(var i=new l,s=[],u=0,c=r;u<c.length;u++){i.has(p=c[u])||(i.add(p),s.push(p))}for(var a=0,f=o;a<f.length;a++){var p;i.has(p=f[a])||(i.add(p),s.push(p))}return s}function D(t,e){var r=[],n=T(t,e,!1);if(I(n))return r;for(var o=J(n.keys()),i=0;;){var s=X(o);if(!s)return r.length=i,r;var u=Q(s);try{r[i]=u}catch(x){try{Z(o)}finally{throw x}}i++}}function F(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function I(t){return void 0===t}function R(t){return null===t}function N(t){return"symbol"==typeof t}function U(t){return"object"==typeof t?null!==t:"function"==typeof t}function z(t,e){switch(F(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var r=3===e?"string":5===e?"number":"default",o=G(t,n);if(void 0!==o){var i=o.call(t,r);if(U(i))throw new TypeError;return i}return H(t,"default"===r?"number":r)}function H(t,e){if("string"===e){var r=t.toString;if(W(r))if(!U(o=r.call(t)))return o;if(W(n=t.valueOf))if(!U(o=n.call(t)))return o}else{var n;if(W(n=t.valueOf))if(!U(o=n.call(t)))return o;var o,i=t.toString;if(W(i))if(!U(o=i.call(t)))return o}throw new TypeError}function L(t){return!!t}function K(t){return""+t}function V(t){var e=z(t,3);return N(e)?e:K(e)}function Y(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function W(t){return"function"==typeof t}function B(t){return"function"==typeof t}function q(t){switch(F(t)){case 3:case 4:return!0;default:return!1}}function G(t,e){var r=t[e];if(null!=r){if(!W(r))throw new TypeError;return r}}function J(t){var e=G(t,o);if(!W(e))throw new TypeError;var r=e.call(t);if(!U(r))throw new TypeError;return r}function Q(t){return t.value}function X(t){var e=t.next();return!e.done&&e}function Z(t){var e=t.return;e&&e.call(t)}function tt(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===a)return e;if(e!==a)return e;var r=t.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return e;var o=n.constructor;return"function"!=typeof o||o===t?e:o}function et(){var t={},e=[],r=function(){function t(t,e,r){this._index=0,this._keys=t,this._values=e,this._selector=r}return t.prototype["@@iterator"]=function(){return this},t.prototype[o]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var r=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var r=this._find(t,!0);return this._values[r]=e,this},e.prototype.delete=function(e){var r=this._find(e,!1);if(r>=0){for(var n=this._keys.length,o=r+1;o<n;o++)this._keys[o-1]=this._keys[o],this._values[o-1]=this._values[o];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new r(this._keys,this._values,n)},e.prototype.values=function(){return new r(this._keys,this._values,i)},e.prototype.entries=function(){return new r(this._keys,this._values,s)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[o]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function n(t,e){return t}function i(t,e){return e}function s(t,e){return[t,e]}}function rt(){return function(){function t(){this._map=new p}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[o]=function(){return this.keys()},t}()}function nt(){var t=16,r=c.create(),n=o();return function(){function t(){this._key=o()}return t.prototype.has=function(t){var e=i(t,!1);return void 0!==e&&c.has(e,this._key)},t.prototype.get=function(t){var e=i(t,!1);return void 0!==e?c.get(e,this._key):void 0},t.prototype.set=function(t,e){return i(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=i(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=o()},t}();function o(){var t;do{t="@@WeakMap@@"+a()}while(c.has(r,t));return r[t]=!0,t}function i(t,r){if(!e.call(t,n)){if(!r)return;Object.defineProperty(t,n,{value:c.create()})}return t[n]}function s(t,e){for(var r=0;r<e;++r)t[r]=255*Math.random()|0;return t}function u(t){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):s(new Uint8Array(t),t):s(new Array(t),t)}function a(){var e=u(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var r="",n=0;n<t;++n){var o=e[n];4!==n&&6!==n&&8!==n||(r+="-"),o<16&&(r+="0"),r+=o.toString(16).toLowerCase()}return r}}function ot(t){return t.__=void 0,delete t.__,t}t("decorate",y),t("metadata",d),t("defineMetadata",b),t("hasMetadata",v),t("hasOwnMetadata",_),t("getMetadata",w),t("getOwnMetadata",m),t("getMetadataKeys",g),t("getOwnMetadataKeys",E),t("deleteMetadata",S)}(n)}()}(f||(f={}));const l={logLevel:"error",log:(t,e="info")=>{console&&console[e]&&console[e](t)}},h=t=>{Object.keys(t).forEach((e=>{e in l&&void 0!==t[e]&&(l[e]=t[e])}))},y=(t,e="info",r=!0)=>{if(!r)return;const n=["info","warn","error","never"];n.indexOf(l.logLevel)>n.indexOf(e)||l.log(t,e)},d=Symbol("empty");class b{constructor(){this.$_disposers=[]}beforeDispose(t){this.$_disposers.push(t)}dispose(){this.$_disposers.forEach((t=>{t()}))}}class v{constructor(t,e){this._desc=t,this.factory=e?.factory}toString(){return`InjectionToken: ${this._desc}`}}const _=Symbol("inject:constructor:params"),w=(t,e={})=>(r,n,o)=>{if(void 0!==n)throw new Error("The @inject decorator can only be used on consturctor parameters!");const i=Reflect.getOwnMetadata(_,r)||[];i[o]={provide:t,optional:!!e.optional},Reflect.defineMetadata(_,i,r)};class m{constructor(t=[],e=null){this.parent=null,this.records=new Map,this.parent=e,t.forEach((t=>{let e=null;if("object"==typeof t){const r=t,n=["useValue","useClass","useExisiting","useFactory"];let o=0;n.forEach((t=>{void 0!==r[t]&&o++})),o>1&&y(`These keys [${n.join(",")}] can only use one, other will be ignored!`,"warn");const{useValue:i=null,...s}=r;e={...s,value:i}}else if("function"==typeof t&&"function"==typeof t.prototype.constructor){e={provide:t,useClass:t}}if(!e)throw y(t),new Error("Error provider onfig!");if(!(void 0!==e.value||e.useClass||e.useExisiting||e.useFactory||e.provide instanceof v&&e.useFactory))throw y(t),new Error("Error provider onfig!");this.records.set(e.provide,e)}))}isProvided(t){return!!this.records.has(t)||!!this.parent&&this.parent.isProvided(t)}get(t){const e=this.records.get(t);return e?(void 0===e.value&&this.$_initRecord(e),e.value||null):this.parent?this.parent.get(t):null}$_initRecord(t){if(t.provide instanceof v&&t.provide.factory){t.value=t.provide.factory(((e,r={})=>{const{optional:n}=r,o=this.get(e);if(!o&&!n)throw y(t),y(v),new Error("Can not find all deps in the DI tree when init the InjectionToken, please provide them before you use the InjectionToken's factory!");return o}))}if(t.useClass){const e=(Reflect.getOwnMetadata(_,t.useClass)||[]).map((e=>{if("object"!=typeof e)return;const{provide:r,optional:n}=e,o=this.get(r);if(!o&&!n)throw y(t),new Error("Can not find all deps in the DI tree when init the useClass, please provide them before you use the useClass!");return o}));t.value=new t.useClass(...e)}else if(t.useExisiting)t.value=this.get(t.useExisiting);else if(t.useFactory){t.value=t.useFactory(((e,r={})=>{const{optional:n}=r,o=this.get(e);if(!o&&!n)throw y(t),new Error("Can not find all deps in the DI tree when init the useFactory, please provide them before you use the useFactory!");return o}))}}dispose(){for(const[,t]of this.records){if(!t.value)return;t.dispose?t.dispose(t.value):"function"==typeof t.value.dispose&&t.value.dispose()}this.parent=null,this.records.clear()}}class g extends b{constructor(r={}){super(),this.displayName="",this.$$={},this.$={},this.displayName||(this.displayName=this.constructor.name,y(`[Service ${this.displayName}]: For better debugging, you'd better add an attribute 'displayName' to each service class.`,"warn"));const n=r.state||{};Object.keys(n).forEach((e=>{this.$$[e]=new t(n[e])}));(r.actions||[]).forEach((t=>{this.$[t]=new e})),Object.keys(this.$$).forEach((t=>{this.subscribe(this.$$[t],{next:e=>{y(`[Service ${this.displayName}]: set new state [${t}].`,"info"),y(e,"info")}})})),Object.keys(this.$).forEach((t=>{this.subscribe(this.$[t],{next:e=>{y(`[Service ${this.displayName}]: receive new action [${t}].`,"info"),y(e,"info")}})}))}get state(){const e={};return Object.keys(this.$$).forEach((r=>{const n=this.$$[r];n instanceof t&&(e[r]=n.value)})),e}subscribe(t,...e){const r=t.subscribe(...e);this.beforeDispose((()=>{r.unsubscribe()}))}}
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E="function"==typeof Symbol&&Symbol.for,S=E?Symbol.for("react.element"):60103,O=E?Symbol.for("react.portal"):60106,x=E?Symbol.for("react.fragment"):60107,$=E?Symbol.for("react.strict_mode"):60108,T=E?Symbol.for("react.profiler"):60114,j=E?Symbol.for("react.provider"):60109,k=E?Symbol.for("react.context"):60110,P=E?Symbol.for("react.async_mode"):60111,M=E?Symbol.for("react.concurrent_mode"):60111,C=E?Symbol.for("react.forward_ref"):60112,A=E?Symbol.for("react.suspense"):60113,D=E?Symbol.for("react.suspense_list"):60120,F=E?Symbol.for("react.memo"):60115,I=E?Symbol.for("react.lazy"):60116,R=E?Symbol.for("react.block"):60121,N=E?Symbol.for("react.fundamental"):60117,U=E?Symbol.for("react.responder"):60118,z=E?Symbol.for("react.scope"):60119;function H(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case S:switch(t=t.type){case P:case M:case x:case T:case $:case A:return t;default:switch(t=t&&t.$$typeof){case k:case C:case I:case F:case j:return t;default:return e}}case O:return e}}}function L(t){return H(t)===M}var K,V={AsyncMode:P,ConcurrentMode:M,ContextConsumer:k,ContextProvider:j,Element:S,ForwardRef:C,Fragment:x,Lazy:I,Memo:F,Portal:O,Profiler:T,StrictMode:$,Suspense:A,isAsyncMode:function(t){return L(t)||H(t)===P},isConcurrentMode:L,isContextConsumer:function(t){return H(t)===k},isContextProvider:function(t){return H(t)===j},isElement:function(t){return"object"==typeof t&&null!==t&&t.$$typeof===S},isForwardRef:function(t){return H(t)===C},isFragment:function(t){return H(t)===x},isLazy:function(t){return H(t)===I},isMemo:function(t){return H(t)===F},isPortal:function(t){return H(t)===O},isProfiler:function(t){return H(t)===T},isStrictMode:function(t){return H(t)===$},isSuspense:function(t){return H(t)===A},isValidElementType:function(t){return"string"==typeof t||"function"==typeof t||t===x||t===M||t===T||t===$||t===A||t===D||"object"==typeof t&&null!==t&&(t.$$typeof===I||t.$$typeof===F||t.$$typeof===j||t.$$typeof===k||t.$$typeof===C||t.$$typeof===N||t.$$typeof===U||t.$$typeof===z||t.$$typeof===R)},typeOf:H},Y=(function(t){t.exports=V}(K={exports:{}},K.exports),K.exports),W={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},B={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},q={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},G={};function J(t){return Y.isMemo(t)?q:G[t.$$typeof]||W}G[Y.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},G[Y.Memo]=q;var Q=Object.defineProperty,X=Object.getOwnPropertyNames,Z=Object.getOwnPropertySymbols,tt=Object.getOwnPropertyDescriptor,et=Object.getPrototypeOf,rt=Object.prototype;var nt=function t(e,r,n){if("string"!=typeof r){if(rt){var o=et(r);o&&o!==rt&&t(e,o,n)}var i=X(r);Z&&(i=i.concat(Z(r)));for(var s=J(e),u=J(r),c=0;c<i.length;++c){var a=i[c];if(!(B[a]||n&&n[a]||u&&u[a]||s&&s[a])){var f=tt(r,a);try{Q(e,a,f)}catch(x){}}}}return e};const ot=n(new m),it=t=>{const e=o(ot),{providers:n=[],children:i}=t,s=new m(n,e);return r.createElement(ot.Provider,{value:s},i)},st=t=>{const e=o(ot);return"function"==typeof t.children?t.children({getService:(t,r={})=>{const{optional:n=!1}=r;if(!e.get(t)&&!n)throw y(t,"error"),new Error("Can not find the service, you provide it?")}}):t.children},ut=t=>e=>{const n="withInjector("+(e.displayName||e.name)+")",o=i(((n,o)=>r.createElement(it,{providers:t.providers},r.createElement(e,Object.assign({ref:o},n)))));return o.displayName=n,nt(o,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var ct=function(t,e){return(ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function at(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}ct(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function ft(t){return"function"==typeof t}var pt=!1,lt={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t);pt=t},get useDeprecatedSynchronousErrorHandling(){return pt}};function ht(t){setTimeout((function(){throw t}),0)}var yt={closed:!0,next:function(t){},error:function(t){if(lt.useDeprecatedSynchronousErrorHandling)throw t;ht(t)},complete:function(){}},dt=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function bt(t){return null!==t&&"object"==typeof t}var vt=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),_t=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var r=this,n=r._parentOrParents,o=r._ctorUnsubscribe,i=r._unsubscribe,s=r._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var u=0;u<n.length;++u){n[u].remove(this)}if(ft(i)){o&&(this._unsubscribe=void 0);try{i.call(this)}catch(x){e=x instanceof vt?wt(x.errors):[x]}}if(dt(s)){u=-1;for(var c=s.length;++u<c;){var a=s[u];if(bt(a))try{a.unsubscribe()}catch(x){e=e||[],x instanceof vt?e=e.concat(wt(x.errors)):e.push(x)}}}if(e)throw new vt(e)}},t.prototype.add=function(e){var r=e;if(!e)return t.EMPTY;switch(typeof e){case"function":r=new t(e);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof t)){var n=r;(r=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var o=r._parentOrParents;if(null===o)r._parentOrParents=this;else if(o instanceof t){if(o===this)return r;r._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return r;o.push(this)}var i=this._subscriptions;return null===i?this._subscriptions=[r]:i.push(r),r},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function wt(t){return t.reduce((function(t,e){return t.concat(e instanceof vt?e.errors:e)}),[])}var mt=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),gt=function(t){function e(r,n,o){var i=t.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=yt;break;case 1:if(!r){i.destination=yt;break}if("object"==typeof r){r instanceof e?(i.syncErrorThrowable=r.syncErrorThrowable,i.destination=r,r.add(i)):(i.syncErrorThrowable=!0,i.destination=new Et(i,r));break}default:i.syncErrorThrowable=!0,i.destination=new Et(i,r,n,o)}return i}return at(e,t),e.prototype[mt]=function(){return this},e.create=function(t,r,n){var o=new e(t,r,n);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(_t),Et=function(t){function e(e,r,n,o){var i,s=t.call(this)||this;s._parentSubscriber=e;var u=s;return ft(r)?i=r:r&&(i=r.next,n=r.error,o=r.complete,r!==yt&&(ft((u=Object.create(r)).unsubscribe)&&s.add(u.unsubscribe.bind(u)),u.unsubscribe=s.unsubscribe.bind(s))),s._context=u,s._next=i,s._error=n,s._complete=o,s}return at(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;lt.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,r=lt.useDeprecatedSynchronousErrorHandling;if(this._error)r&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)r?(e.syncErrorValue=t,e.syncErrorThrown=!0):ht(t),this.unsubscribe();else{if(this.unsubscribe(),r)throw t;ht(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};lt.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(r){if(this.unsubscribe(),lt.useDeprecatedSynchronousErrorHandling)throw r;ht(r)}},e.prototype.__tryOrSetError=function(t,e,r){if(!lt.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,r)}catch(n){return lt.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=n,t.syncErrorThrown=!0,!0):(ht(n),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(gt);var St=function(){function t(t){this.total=t}return t.prototype.call=function(t,e){return e.subscribe(new Ot(t,this.total))},t}(),Ot=function(t){function e(e,r){var n=t.call(this,e)||this;return n.total=r,n.count=0,n}return at(e,t),e.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},e}(gt);function xt(){const t=o(ot);return s((e=>t.get(e)),[t])}const $t=t=>xt()(t);function Tt(t){const e=xt();return t.map((t=>e(t)))}function jt(t,e){u((()=>{const r=t.subscribe({next:t=>e(t)});return()=>{r.unsubscribe()}}),[t])}function kt(e,r){var n;e instanceof t?e=e.pipe((n=1,function(t){return t.lift(new St(n))})):(y(e,"warn"),y("Yout are use useBehaviorChange on a observable that is not BehaviorSubject!","warn")),u((()=>{const t=e.subscribe({next:t=>r(t)});return()=>{t.unsubscribe()}}),[e])}function Pt(e,r){const[n,o]=c((()=>e instanceof t?e.value:r));return u((()=>{const t=e.subscribe({next:t=>o(t)});return()=>{t.unsubscribe()}}),[e]),n}function Mt(t){const[e,r]=c((()=>t.value));return u((()=>{const e=t.subscribe({next:t=>r(t)});return()=>{e.unsubscribe()}}),[t]),e}function Ct(t,r=!1){const[n,o]=c(null),i=a((()=>t instanceof e&&r&&t.hasError),[t,r]);return u((()=>{if(i)return;const e=t.subscribe({error:t=>{o(t)}});return()=>{e.unsubscribe()}}),[t,i]),n}export{b as Disposable,w as Inject,v as InjectionToken,m as Injector,g as Service,st as ServiceConsumer,it as ServiceInjector,h as config,y as debug,d as empty,kt as useBehaviorChange,Mt as useBehaviorState,xt as useGetService,jt as useObservableChange,Ct as useObservableError,Pt as useObservableState,$t as useService,Tt as useServices,ut as withInjector};
